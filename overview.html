<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Pack & Wrap • Overview</title>
  <link rel="stylesheet" href="styles.css"/>
  <style>
    .page-head{ display:flex; align-items:flex-end; justify-content:space-between; gap:12px; margin-bottom:12px; }
    .page-head .title-wrap{ display:flex; flex-direction:column; gap:4px; }
    .page-head h2{ margin:0; font-size:22px; letter-spacing:.2px; }
    .page-head .sub{ margin:0; color:var(--muted); font-size:13px; }
    .quick-actions{ display:flex; gap:8px; flex-wrap:wrap; }
    .quick-actions .btn{ padding:8px 12px; border-radius:12px; }
    .kpi{ display:grid; gap:10px; grid-template-columns: repeat(6, minmax(130px, 1fr)); }
    .kpi .card{ padding:14px; display:grid; gap:6px; }
    .kpi .label{ color:var(--muted); font-size:12px; }
    .kpi .value{ font-size:20px; font-weight:800; letter-spacing:.2px; }
    .kpi .trend{ font-size:12px; color:var(--muted); }
    .highlights{ display:grid; gap:12px; grid-template-columns:repeat(3, minmax(180px,1fr)); }
    .highlights .card{ padding:14px; display:grid; gap:6px; }
    .highlights .label{ color:var(--muted); font-size:12px; }
    .highlights .value{ font-size:18px; font-weight:700; }
    .charts{ display:grid; gap:12px; grid-template-columns:1fr 1fr; }
    .chart-title{ margin:0 0 8px; color:#e7dff1; font-size:14px; }
    .chart-card{ padding:14px; }
    @media (max-width:1100px){ .kpi{ grid-template-columns: repeat(3, minmax(140px,1fr)); } .charts{ grid-template-columns:1fr; } }
    @media (max-width:680px){ .page-head{ flex-direction:column; align-items:flex-start; } .kpi{ grid-template-columns: repeat(2, minmax(140px,1fr)); } .highlights{ grid-template-columns:1fr; } }
    [data-animate]{ transition: transform .15s ease, filter .15s ease; }
    [data-animate].pulse{ transform: translateY(-1px); filter: drop-shadow(0 4px 12px rgba(236,72,153,.16)); }
  </style>
</head>

<body class="bg-grad" id="page-overview">
  <div class="bg-figurines" aria-hidden="true">
    <span></span><span></span><span></span><span></span><span></span><span></span>
    <span></span><span></span><span></span><span></span><span></span><span></span>
  </div>

  <header class="topbar">
    <div class="brand-row">
      <span class="brand">Pack &amp; Wrap</span>
      <span class="chip" id="overallProfitChip">Overall 0 TK</span>
    </div>

    <div class="tabs-wrap">
      <button id="navToggle" class="nav-toggle" type="button">☰ Menu</button>
      <nav class="tabs">
        <a href="overview.html" id="overviewTab">Overview</a>
        <a href="products.html">Products</a>
        <a href="investments.html">Investments</a>
        <a href="sales.html">Sales</a>
        <a href="customers.html">Customers</a>
        <a href="boost.html">Boost</a>
        <a href="backup.html">Backup</a>
        <a class="btn ghost" href="#" id="logoutBtn">Logout</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <section class="section">
      <div class="page-head">
        <div class="title-wrap">
          <h2>Overview</h2>
          <p class="sub">At-a-glance totals and trends for your business.</p>
        </div>
        <div class="quick-actions">
          <a href="sales.html" class="btn primary">＋ Add Sale</a>
          <a href="investments.html" class="btn">＋ Add Investment</a>
          <a href="boost.html" class="btn">＋ Add Expense</a>
        </div>
      </div>

      <div class="kpi">
        <div class="card"><div class="label">1st Investment</div><div id="tInv1" class="value" data-animate>0 TK</div><div class="trend">Lifetime total</div></div>
        <div class="card"><div class="label">2nd Investment</div><div id="tInv2" class="value" data-animate>0 TK</div><div class="trend">Lifetime total</div></div>
        <div class="card"><div class="label">Sales (1st)</div><div id="tSell1" class="value" data-animate>0 TK</div><div class="trend">Gross sales</div></div>
        <div class="card"><div class="label">Sales (2nd)</div><div id="tSell2" class="value" data-animate>0 TK</div><div class="trend">Gross sales</div></div>
        <div class="card"><div class="label">Expenses</div><div id="tExp" class="value" data-animate>0 TK</div><div class="trend">All tracked expenses</div></div>
        <div class="card"><div class="label">Overall</div><div id="tProfit" class="value" data-animate>0 TK</div><div class="trend">Sales − Investments − Expenses</div></div>
      </div>

      <div class="highlights" id="overviewHighlights" style="margin-top:16px;">
        <div class="card"><div class="label">Customers</div><div id="highlightCustomers" class="value" data-animate>0</div></div>
        <div class="card"><div class="label">Best Seller</div><div id="highlightBest" class="value" data-animate>—</div></div>
        <div class="card"><div class="label">Low Stock</div><div id="highlightLow" class="value" data-animate>All OK</div></div>
      </div>

      <div class="charts" style="margin-top:16px;">
        <div class="card chart-card"><h3 class="chart-title">Daily Profit (after expenses)</h3><canvas id="chartProfit" style="width:100%;height:240px;"></canvas></div>
        <div class="card chart-card"><h3 class="chart-title">Sales vs Investment (Monthly)</h3><canvas id="chartSalesInv" style="width:100%;height:240px;"></canvas></div>
      </div>
    </section>
  </main>

  <script src="app.js"></script>
  <script>
    // Auth gate + pretty URL
    (function(){
      const authed = sessionStorage.getItem('pw_authed') === '1';
      const uid = sessionStorage.getItem('pw_userId') || localStorage.getItem('pw_userId');

      if(!authed || !uid){
        history.replaceState({}, '', '/login');
        location.replace('index.html');
        return;
      }
      const want = `/${encodeURIComponent(uid)}/overview`;
      if (location.pathname !== want) {
        history.replaceState({}, '', want);
      }
    })();

    // Logout
    document.getElementById('logoutBtn')?.addEventListener('click', (e)=>{
      e.preventDefault();
      sessionStorage.removeItem('pw_authed');
      sessionStorage.removeItem('pw_userId');
      localStorage.removeItem('pw_authed');
      localStorage.removeItem('pw_userId');
      history.replaceState({}, '', '/login');
      location.replace('index.html');
    });

    // (Your overview data/render code stays as-is)
  </script>
</body>
</html>
